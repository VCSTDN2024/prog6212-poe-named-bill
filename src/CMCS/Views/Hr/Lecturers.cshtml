@model IEnumerable<CMCS.Models.User>
@{
    ViewData["Title"] = "Lecturer Directory";
}

<h1>Lecturer Directory</h1>
<p class="text-muted">Update lecturer contact details to keep payroll data accurate.</p>

@if (TempData["HrSuccess"] != null)
{
    <div class="alert alert-success">@TempData["HrSuccess"]</div>
}

<div class="accordion" id="lecturerAccordion">
@foreach (var lecturer in Model)
{
    <div class="accordion-item">
        <h2 class="accordion-header" id="heading_@lecturer.Id">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse_@lecturer.Id">
                @lecturer.FullName (@lecturer.Username)
            </button>
        </h2>
        <div id="collapse_@lecturer.Id" class="accordion-collapse collapse" data-bs-parent="#lecturerAccordion">
            <div class="accordion-body">
                <form asp-action="UpdateLecturer" method="post" class="row g-3">
                    <input type="hidden" name="Id" value="@lecturer.Id" />
                    <div class="col-md-6">
                        <label class="form-label">Full Name</label>
                        <input class="form-control" name="FullName" value="@lecturer.FullName" />
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Email</label>
                        <input class="form-control" name="Email" value="@lecturer.Email" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Phone</label>
                        <input class="form-control" name="PhoneNumber" value="@lecturer.PhoneNumber" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Department</label>
                        <input class="form-control" name="Department" value="@lecturer.Department" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Bank Account</label>
                        <input class="form-control" name="BankAccount" value="@lecturer.BankAccount" />
                    </div>
                    <div class="col-12">
                        <label class="form-label">Address</label>
                        <input class="form-control" name="Address" value="@lecturer.Address" />
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Role</label>
                        <select class="form-select" name="Role">
                            @if (lecturer.Role == "Lecturer")
                            {
                                <option value="Lecturer" selected>Lecturer</option>
                            }
                            else
                            {
                                <option value="Lecturer">Lecturer</option>
                            }
                            @if (lecturer.Role == "Coordinator")
                            {
                                <option value="Coordinator" selected>Coordinator</option>
                            }
                            else
                            {
                                <option value="Coordinator">Coordinator</option>
                            }
                            @if (lecturer.Role == "Manager")
                            {
                                <option value="Manager" selected>Manager</option>
                            }
                            else
                            {
                                <option value="Manager">Manager</option>
                            }
                            @if (lecturer.Role == "HR")
                            {
                                <option value="HR" selected>HR</option>
                            }
                            else
                            {
                                <option value="HR">HR</option>
                            }
                        </select>
                    </div>
                    <div class="col-12 text-end">
                        <button class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
}
</div>
